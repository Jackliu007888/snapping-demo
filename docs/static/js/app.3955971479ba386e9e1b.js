webpackJsonp([1],{NHnr:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("7+uW"),r=e("Dd8w"),o=e.n(r),s=function(t,n){var e=t.createSVGPoint();e.x=n.clientX,e.y=n.clientY;var i=e.matrixTransform(t.getScreenCTM().inverse());return{x:i.x,y:i.y}},c=e("woOf"),a=e.n(c),h=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=+new Date,o=0,s=0,c=null,a=void 0,h=void 0,p=void 0,d=function(){s=r,t.apply(h,p)};return function(){r=+new Date,h=this,p=arguments,a=r-(i?o:s)-n,clearTimeout(c),i?e?c=setTimeout(d,n):a>=0&&d():a>=0?d():e&&(c=setTimeout(d,-a)),o=r}},p=function(t){return{x:t[0][0],y:t[1][0],width:t[0][2]-t[0][0],height:t[1][2]-t[1][0]}},d=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return[[t.x+n,t.x+t.width/2+n,t.x+t.width+n],[t.y+e,t.y+t.height/2+e,t.y+t.height+e]]},u={name:"rectangle",props:["id","points","getViewportRef","correctX","correctY"],data:function(){return p(this.points)},watch:{points:function(t){a()(this,p(t))}},methods:{dragElement:function(t){var n=this,e=!1,i=this.getViewportRef(),r=s(i,t),o=this.x,c=this.y,p=h(function(t){e=!0;var h=s(i,t);a()(n,{x:o+h.x-r.x,y:c+h.y-r.y}),n.$emit("draging",n.id,d(n))},30,!0);window.addEventListener("mousemove",p),window.addEventListener("mouseup",function t(i){e&&n.$emit("update:points",d(n,n.correctX,n.correctY)),window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",t)})}}},g={render:function(){var t=this.$createElement;return(this._self._c||t)("rect",{attrs:{x:this.x+this.correctX,y:this.y+this.correctY,width:this.width,height:this.height,stroke:"#000","stroke-width":"1",fill:"transparent"},on:{mousedown:this.dragElement}})},staticRenderFns:[]},l=[{x:124,y:125,width:100,height:100},{x:723,y:265,width:200,height:130},{x:482,y:422,width:130,height:200},{x:208,y:402,width:231,height:503}],f={components:{rectangle:e("VU/8")(u,g,!1,null,null,null).exports},data:function(){var t=+new Date;return{shapeList:l.map(function(n,e){return o()({id:t+e,points:function(t){return[[t.x,t.x+t.width/2,t.x+t.width],[t.y,t.y+t.height/2,t.y+t.height]]}(n)},n)}),measuringLine:[[[0,0],[0,0]],[[0,0],[0,0]]],dragingShape:null,correctX:0,correctY:0}},methods:{getViewportRef:function(){return this.$refs.svg},handleDragingShape:function(t,n){var e=[[0,0],[0,0]],i=[[0,0],[0,0]],r={points:null,distance:1/0,pointIndex:[],correct:0},o={points:null,distance:1/0,pointIndex:[],correct:0};this.shapeList.forEach(function(e){if(e.id!==t){var i=[[e.points[0][0]-n[0][0],0],[e.points[0][0]-n[0][1],0],[e.points[0][0]-n[0][2],0],[e.points[0][1]-n[0][0],1],[e.points[0][1]-n[0][1],1],[e.points[0][1]-n[0][2],1],[e.points[0][2]-n[0][0],2],[e.points[0][2]-n[0][1],2],[e.points[0][2]-n[0][2],2]],s=[[e.points[1][0]-n[1][0],0],[e.points[1][0]-n[1][1],0],[e.points[1][0]-n[1][2],0],[e.points[1][1]-n[1][0],1],[e.points[1][1]-n[1][1],1],[e.points[1][1]-n[1][2],1],[e.points[1][2]-n[1][0],2],[e.points[1][2]-n[1][1],2],[e.points[1][2]-n[1][2],2]];i.forEach(function(t){Math.abs(t[0])<r.distance&&(r={distance:Math.abs(t[0]),pointIndex:t[1],points:e.points,correct:t[0]})}),s.forEach(function(t){Math.abs(t[0])<o.distance&&(o={distance:Math.abs(t[0]),pointIndex:t[1],points:e.points,correct:t[0]})})}}),r.distance<8?(0==r.pointIndex?(e[0][0]=r.points[0][0],e[1][0]=r.points[0][0]):1===r.pointIndex?(e[0][0]=r.points[0][1],e[1][0]=r.points[0][1]):(e[0][0]=r.points[0][2],e[1][0]=r.points[0][2]),r.points[1][0]>n[1][0]?(e[0][1]=n[1][0],e[1][1]=r.points[1][2]):(e[0][1]=r.points[1][0],e[1][1]=n[1][2])):r.correct=0,o.distance<8?(0==o.pointIndex?(i[0][1]=o.points[1][0],i[1][1]=o.points[1][0]):1===o.pointIndex?(i[0][1]=o.points[1][1],i[1][1]=o.points[1][1]):(i[0][1]=o.points[1][2],i[1][1]=o.points[1][2]),o.points[0][0]>n[0][0]?(i[0][0]=n[0][0],i[1][0]=o.points[0][2]):(i[0][0]=o.points[0][0],i[1][0]=n[0][2])):o.correct=0,this.measuringLine=[e,i],this.dragingShape=t,this.correctX=r.correct,this.correctY=o.correct},handleDragEnd:function(){this.dragingShape=null,this.correctX=0,this.correctY=0,this.measuringLine=[[[0,0],[0,0]],[[0,0],[0,0]]]}}},w={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("svg",{ref:"svg",attrs:{viewBox:"0 0 1000 1000",width:"500",height:"500"}},[e("rect",{attrs:{width:"100%",height:"100%",fill:"none",stroke:"#000",x:"0",y:"0"}}),t._v(" "),t._l(t.shapeList,function(n,i){return e("rectangle",{key:n.id,attrs:{id:n.id,points:n.points,getViewportRef:t.getViewportRef,correctX:t.dragingShape===n.id?t.correctX:0,correctY:t.dragingShape===n.id?t.correctY:0},on:{"update:points":[function(e){t.$set(n,"points",e)},t.handleDragEnd],draging:t.handleDragingShape}})}),t._v(" "),e("line",{attrs:{x1:t.measuringLine[0][0][0],y1:t.measuringLine[0][0][1],x2:t.measuringLine[0][1][0],y2:t.measuringLine[0][1][1],stroke:"#f00"}}),t._v(" "),e("line",{attrs:{x1:t.measuringLine[1][0][0],y1:t.measuringLine[1][0][1],x2:t.measuringLine[1][1][0],y2:t.measuringLine[1][1][1],stroke:"#f00"}})],2)},staticRenderFns:[]},x=e("VU/8")(f,w,!1,null,null,null).exports,m={render:function(t){return t(x)}};i.a.config.productionTip=!1,new i.a({el:"#app",render:function(t){return t(m)}})}},["NHnr"]);
//# sourceMappingURL=app.3955971479ba386e9e1b.js.map